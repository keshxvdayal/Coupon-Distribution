# üéüÔ∏è Round-Robin Coupon Distribution with Abuse Prevention

Welcome to the **Round-Robin Coupon Distribution with Abuse Prevention** project! This live web application distributes coupons to guest users in a fair and secure manner, preventing multiple claims via page refresh exploits.

## üöÄ Features

‚úÖ **Round-Robin Distribution**: Coupons are distributed evenly among users.
‚úÖ **IP Tracking**: Restricts users from claiming multiple coupons using the same IP within a specific time frame.
‚úÖ **Cookie-Based Tracking**: Ensures users can't claim multiple coupons by refreshing the browser.
‚úÖ **Real-Time Updates**: Users get instant feedback on coupon claims and eligibility.
‚úÖ **User Feedback**: Clear messages are displayed for claim success, failure, or cooldown time remaining.
‚úÖ **Secure System**: Implements multiple abuse-prevention techniques to maintain fairness.

---

## üèóÔ∏è Project Structure

```
üì¶ Project Root
‚îÇ
‚îú‚îÄ‚îÄ üìÇ backend
‚îÇ   ‚îú‚îÄ‚îÄ server.js  # Backend server (Express, Node.js)
‚îÇ   ‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îú‚îÄ‚îÄ controllers/
‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îú‚îÄ‚îÄ database.js  # Database connection (MongoDB)
‚îÇ
‚îú‚îÄ‚îÄ üìÇ frontend
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ public
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ src
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ app
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ favicon.ico
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ globals.css
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ components
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ ui
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ClaimButton.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CouponList.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ available-coupons.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ claimed-coupons.tsx
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ hooks
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ lib
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ README.md
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ eslint.config.mjs
```

---

## üõ†Ô∏è Tech Stack

- **Frontend**: Next.js (React, TypeScript, Tailwind CSS)
- **Backend**: Node.js, Express.js
- **Database**: MongoDB
- **State Management**: React Context API
- **Security**: IP tracking, cookie-based tracking

## üéØ Functionality

1. **Coupon Distribution:** Coupons are given out in a round-robin manner.
2. **User Restrictions:**
   - **IP Tracking**: Prevents multiple claims from the same IP within a time window.
   - **Cookie Tracking**: Ensures that users don‚Äôt claim multiple coupons from the same browser.
3. **User Experience**
   - Users receive clear messages regarding their coupon claim status.
   - Cooldown notifications inform users of the remaining time before they can claim another coupon.

---

## üõ†Ô∏è Tech Stack

- **Frontend**: [Next.js](https://nextjs.org/), TypeScript, Tailwind CSS
- **Backend**: [Node.js](https://nodejs.org/), [Express.js](https://expressjs.com/)
- **Database**: [MongoDB](https://www.mongodb.com/)
- **Deployment**: [Vercel](https://vercel.com/) (Frontend) + [Railway](https://railway.app/) or [Render](https://render.com/) for Backend
- **Security**: IP tracking, Cookie-based session tracking
- **Tools & Libraries**: ESLint, Prettier, Sanity CMS, GROQ

---

## üèóÔ∏è Installation Guide

### 1Ô∏è‚É£ Clone the Repository
```bash
https://github.com/your-github-username/round-robin-coupons.git
cd round-robin-coupon-distribution
```

### 2Ô∏è‚É£ Setup Backend
```bash
cd backend
npm install
```

### 3Ô∏è‚É£ Setup Environment Variables
Create a `.env` file inside the `backend` folder and add the following:
```env
PORT=5000
MONGO_URI=your_mongodb_connection_string
SECRET_KEY=your_secret_key
COOKIE_MAX_AGE=3600000 # (1 hour in milliseconds)
```

### 4Ô∏è‚É£ Start Backend Server
```bash
cd backend
npm install
npm start
```

---

## üåê Frontend Setup

### 5Ô∏è‚É£ Install Frontend Dependencies
```bash
cd frontend
npm install
```

### 6Ô∏è‚É£ Start Frontend Server
```bash
npm run dev
```
The frontend should be running on `http://localhost:3000`

---

## üöÄ Deployment Guide

### üìå Deploy Backend to Render or Vercel
1. Create an account on [Render](https://render.com/) or [Vercel](https://vercel.com/).
2. Connect your GitHub repository.
3. Select `backend` folder for deployment.
4. Set the environment variables as defined in `.env`.
5. Choose the build command:
   ```bash
   npm install && node server.js
   ```
6. Deploy the backend and note down the deployed API URL.

### üìå Deploy Frontend to Vercel
1. Create an account on [Vercel](https://vercel.com/) and link your GitHub repository.
2. In your project settings, set the **root directory** to `frontend`.
3. Add your environment variables in Vercel under **Settings ‚Üí Environment Variables**.
4. Deploy your project.

#### üéØ **Make sure your frontend .env file contains the deployed backend URL:**
```env
NEXT_PUBLIC_API_URL=your_backend_url
```

---

## üöÄ Project Workflow

1Ô∏è‚É£ **User visits the website** and is assigned a temporary guest session.
2Ô∏è‚É£ The system **distributes coupons in a round-robin manner** to users.
3Ô∏è‚É£ Mechanisms are in place to **prevent abuse**, such as IP tracking and session-based restrictions.
4Ô∏è‚É£ The user receives **feedback** on their coupon claim status.
5Ô∏è‚É£ If the user is **ineligible** (due to refreshing the page too many times), they are informed how long they must wait to claim another coupon.
6Ô∏è‚É£ The project is **deployed on Vercel** for the frontend and **Render/Vercel** for the backend.

---

## üöÄ Deployment on Vercel

### 1Ô∏è‚É£ Deploy Frontend (Next.js on Vercel)
1. Go to [Vercel](https://vercel.com/) and log in with GitHub.
2. Click **New Project** and select your repository.
3. Set the root directory to `/frontend`.
4. Set environment variables if required (e.g., API endpoints).
5. Click **Deploy**.

### 2Ô∏è‚É£ Deploy Backend (Node.js on Vercel/Render)
- **On Vercel**:
  1. Create a new project in Vercel.
 2. Set your root directory to `/backend`.
 3. Configure environment variables (same as `.env` file).
 4. Deploy the project.

### 2Ô∏è‚É£ Deploy Backend (Render - Alternative)
1. Create an account on [Render](https://render.com/).
2. Click on `New Web Service` and connect your GitHub repo.
3. Set the root directory to `/backend`.
4. Set the **Start Command** to:
   ```bash
   node server.js
   ```
5. Add the same environment variables from `.env`.
6. Deploy the backend and get the live API URL.

### 2Ô∏è‚É£ Connect Frontend to Backend
1. In your **Vercel Project Settings**, navigate to `Environment Variables`.
2. Add `NEXT_PUBLIC_API_BASE_URL` with the value of your deployed backend URL.
3. Redeploy your frontend.

---

## üöÄ How It Works
1. User visits the site and registers.
2. The system assigns a **random coupon in a round-robin manner**.
3. The backend tracks the **user‚Äôs IP address and session** to prevent abuse.
4. The user receives a notification about their successful claim or the waiting time left.

---

## üìú Tech Stack
- **Frontend**: Next.js, TypeScript, Tailwind CSS
- **Backend**: Node.js, Express.js
- **Database**: MongoDB (via Mongoose)
- **Hosting**:
  - Frontend: **Vercel**
  - Backend: [Render](https://render.com/) or Vercel

---

## üöÄ Local Development
### Prerequisites
- [Node.js](https://nodejs.org/) (v16 or later)
- [npm](https://www.npmjs.com/) or [yarn](https://yarnpkg.com/)
- [Vercel CLI](https://vercel.com/docs/cli)

### 1Ô∏è‚É£ Clone the Repository
```bash
git clone https://github.com/your-username/your-repo.git
cd your-repo
```

### 2Ô∏è‚É£ Install Dependencies
#### Install backend dependencies:
```bash
cd backend
npm install
```

#### Install frontend dependencies
```bash
cd ../frontend
npm install
```

### 3Ô∏è‚É£ Set Up Environment Variables
Create a `.env` file in the backend directory and add:
```
PORT=5000
DATABASE_URL=your_database_url
SESSION_SECRET=your_secret_key
``` 

### 4Ô∏è‚É£ Run Backend
Navigate to the `backend` directory and run:
```bash
cd backend
node server.js
```

### 5Ô∏è‚É£ Deploying on Vercel
1. **Sign in** to [Vercel](https://vercel.com/) and click **New Project**.
2. Select your **GitHub repository**.
3. Set your frontend folder as the **root directory** (`frontend`).
4. Go to **Environment Variables** and add the backend API URL (`NEXT_PUBLIC_BACKEND_URL`).
5. Click **Deploy** and wait for the process to complete.

### 4Ô∏è‚É£ Deploy Backend to Vercel (Alternative: Render)
1. Go to [Vercel](https://vercel.com/) or [Render](https://render.com/).
2. Select your repository and set the **root directory** as `backend`.
3. In **Environment Variables**, add the same variables from `.env`.
4. Deploy and get the **Backend API URL**.

---

## üöÄ Features
‚úÖ **Round-Robin Coupon Distribution**: Ensures fair allocation of coupons.
‚úÖ **Anti-Exploit Measures**: Prevent users from claiming multiple coupons by refreshing.
‚úÖ **User Authentication**: Simple signup and login system.
‚úÖ **Responsive Design**: Works on desktop and mobile devices.
‚úÖ **User Feedback**: Users get real-time notifications on their claim status.

---

## üöÄ Technologies Used
- **Frontend**: Next.js, TypeScript, Tailwind CSS, Zustand (for state management)
- **Backend**: Node.js, Express.js
- **Database**: MongoDB (Mongoose ORM)
- **Hosting**: Vercel (Frontend) & Render (Backend)
- **Authentication**: Cookie-based session management
- **Real-time Features**: WebSockets for real-time updates
- **Security**: IP Tracking & Cookie-based Session Handling

---

## üõ† Deployment Steps (Vercel)

### üñ•Ô∏è **1. Deploy Backend on Vercel**

1Ô∏è‚É£ Go to **[Vercel](https://vercel.com/)** and log in.
2Ô∏è‚É£ Click on **New Project** and select your GitHub repository.
3Ô∏è‚É£ Choose `backend` as the **root directory**.
4Ô∏è‚É£ Go to **Settings > Environment Variables** and add the following:
   ```plaintext
   PORT=5000
   COOKIE_MAX_AGE=3600000
   # Add other necessary backend environment variables
   ```
5Ô∏è‚É£ Click **Deploy** and copy the generated API URL.

---

### üåê **2. Deploy Frontend on Vercel**

1Ô∏è‚É£ Go to **Vercel** and create another **New Project**.
2Ô∏è‚É£ Select your repository and set the **root directory** to `frontend`.
3Ô∏è‚É£ Add an environment variable for the backend URL obtained in step 1:
   ```
   NEXT_PUBLIC_API_URL=your_backend_vercel_url
   ```
4Ô∏è‚É£ Click **Deploy** and wait for Vercel to deploy your frontend.

---

## üéÆ **How It Works**

1Ô∏è‚É£ Users visit the platform and click **Claim Coupon** to receive a coupon.
2Ô∏è‚É£ The system assigns a coupon in a **round-robin manner**.
3Ô∏è‚É£ **Anti-exploit Mechanisms:**
   - Users cannot claim multiple coupons by refreshing the page.
   - The system tracks users via their **IP address** and **browser session cookies**.
4Ô∏è‚É£ If a user tries to claim another coupon too soon, they receive a message with a cooldown timer.
5Ô∏è‚É£ The app provides **real-time feedback** after a claim (success/failure message with remaining wait time).

---

### üìÇ **Project Structure**
```
üì¶ project-root
‚îÇ
‚îú‚îÄ‚îÄ üìÇ backend   # Express.js server
‚îÇ   ‚îú‚îÄ‚îÄ server.js  # Main backend file (Express.js)
‚îÇ
‚îú‚îÄ‚îÄ üìÇ frontend  # Next.js frontend
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ public   # Static assets (e.g., favicon, images)
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ src
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ app         # Main application folder
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ favicon.ico
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ globals.css
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ClaimButton.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CouponList.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ available-coupons.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ claimed-coupons.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ coupon-detail.tsx
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ hooks
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ eslint.config.mjs
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ README.md
```

---

## ‚öôÔ∏è **How to Run Locally**

### 1Ô∏è‚É£ **Clone the Repository**
```bash
git clone https://github.com/your-username/your-repo.git
cd your-repo
```

### 2Ô∏è‚É£ **Backend Setup**
```bash
cd backend
npm install
